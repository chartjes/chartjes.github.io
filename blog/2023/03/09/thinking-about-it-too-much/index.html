<!DOCTYPE html>
<html>
    <head lang="en">
        <title>Thinking About Testing Too Much &mdash; Grumpy Learning &mdash; Where even the CSS is grumpy</title>
        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://grumpy-learning.com/build/app.css">

        <link rel="apple-touch-startup-image" href="https://grumpy-learning.com/build/2048x2048.png">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="shortcut icon" sizes="76x76" href="https://grumpy-learning.com/build/jackson/76x76.png">
        <link rel="shortcut icon" sizes="120x120" href="https://grumpy-learning.com/build/jackson/120x120.png">
        <link rel="shortcut icon" sizes="128x128" href="https://grumpy-learning.com/build/jackson/128x128.png">
        <link rel="shortcut icon" sizes="152x152" href="https://grumpy-learning.com/build/jackson/152x152.png">
        <link rel="shortcut icon" sizes="196x196" href="https://grumpy-learning.com/build/jackson/196x196.png">
        <link rel="shortcut icon" sizes="512x512" href="https://grumpy-learning.com/build/jackson/512x512.png">
        <link rel="shortcut icon" sizes="1024x1024" href="https://grumpy-learning.com/build/jackson/1024x1024.png">
        <link rel="shortcut icon" sizes="2048x2048" href="https://grumpy-learning.com/build/jackson/2048x2048.png">
        <link rel="apple-touch-icon" sizes="76x76" href="https://grumpy-learning.com/build/jackson/76x76.png">
        <link rel="apple-touch-icon" sizes="120x120" href="https://grumpy-learning.com/build/jackson/120x120.png">
        <link rel="apple-touch-icon" sizes="128x128" href="https://grumpy-learning.com/build/jackson/128x128.png">
        <link rel="apple-touch-icon" sizes="152x152" href="https://grumpy-learning.com/build/jackson/152x152.png">
        <link rel="apple-touch-icon" sizes="196x196" href="https://grumpy-learning.com/build/jackson/196x196.png">
        <link rel="apple-touch-icon" sizes="512x512" href="https://grumpy-learning.com/build/jackson/512x512.png">
        <link rel="apple-touch-icon" sizes="1024x1024" href="https://grumpy-learning.com/build/jackson/1024x1024.png">
        <link rel="apple-touch-icon" sizes="2048x2048" href="https://grumpy-learning.com/build/jackson/2048x2048.png">

        <link rel="alternate" type="application/atom+xml" href="https://grumpy-learning.com/atom.xml" title="Grumpy Learning activity feed" />
                                <script src="/assets/js/mastodon.js"></script>
            </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
                <div class="container">
                    <a class="navbar-brand" href="https://grumpy-learning.com/">Grumpy Learning</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/blog">Posts Archive</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/blog/categories">Categories</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/blog/tags">Tags</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/about">About</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/uses">What Chris Uses</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/atom.xml">RSS Feed</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <main role="main" class="container">
            <div class="row">
                <div class="col-sm-7">
                        <article class="h-entry">
        <header>
            <h2><div class="p-name">Thinking About Testing Too Much</div> <small>post</small></h2>
        </header>
        <div class="e-content">
            <h1 id="thinking-about-testing-too-much">Thinking About Testing Too Much</h1>

<p>Back in February and had a <a href="https://www.freethegeek.fm/51">very long and fun chat</a> with
my friend Matt Setter about the one topic I think about way too much -- testing. Rather
than steal what Matt wrote, just go read the linked above post to get a sense of what
we discussed. If you have followed my rantings online for any period of time, none of
what I discussed there should be new to you.</p>

<p>I mean, you can't really blame me -- my career niche has been "testing PHP code" since at
least 2006. That is a really, really long time to be focussed on an issue. Now, I might
not be the best programmer (a lot of times I feel like I have been doing programming for
1 year, 25 times) but I do know a ton about what does and does not lead to good outcomes
for long-running projects.</p>

<h2 id="the-next-wave-of-testing">The Next Wave Of Testing</h2>

<p>As I write this, I am at a crossroads as to what to talk about next. I'm kind of over speaking
at conferences except in places I have not been (if you are an organizer of an event in Africa,
South America, or Japan -- please get in touch) and I am not sure I want to put the effort
in to write yet another book or do training courses. If I am being honest, I am getting older
and like hanging out at home more and having unstructured time. I have two frustrating hobbies
that can keep my mind sharp. Arguing with people about testing their code feels like a losing
proposition and a huge waste of my time.</p>

<p>So, what I have found interesting is the increasingly-growing idea that there are some code-related
things that you can do that can reduce the amount of tests you need to write for your code
or sometimes even eliminate them. This is, of course, at best misguided and at worst, wrong.</p>

<h2 id="types-as-tests">Types As Tests</h2>

<p>When they got introduced into the language, I viewed typing (I define it as declaring at creation
what 'type' of thing an object or variable is supposed to be) as something that would get rid
of some types of tests I found myself writing and allow the PHP interpreter to enforce rules
about what sort of things my code was returning to other code that called it. No more tests
verifying that a method returned an array!</p>

<p>They are NOT a substitute for tests. They are a helpful tool that provides intent for your code
and greatly reduces the likelihood of SOME types of errors happening when (for example) your
code is expecting a list of things and instead gets a string.</p>

<h2 id="static-analysis-as-tests">Static Analysis As Tests</h2>

<p>Static analysis tools are something I have been using professionally for a few years. They are
an additional layer ON TOP OF types that goes even further down the road of making sure the intent
of your code is clear. Sure, it's annoying to have a tool say "well, actually, you said over HERE
that you are expecting an array but you ACTUALLY are passing a list. What one is it?" but it's
better than you trying to figure out why some code you wrote yesterday suddenly stopped working
today when you (and this is often not reality) "didn't change anything".</p>

<p>Again, these are NOT a substitute for tests. They are a COMPLEMENTARY tool for testing. Just because
PHPStan is not reporting any errors doesn't mean your code is behaving as expected!</p>

<h2 id="grumpy%27s-theory-on-tests">Grumpy's Theory On Tests</h2>

<p>I am incredibly confident in saying that you should 100% have automated tests for your application
that cover:</p>

<ul>
<li>business logic</li>
<li>how your users will interact with your app</li>
</ul>

<p>What testing tools you use to make this happens is up to you. If you have done a decent job of
creating a decoupled code base where you are injecting dependencies to your objects (let's be
real, 90% of PHP code out there still running and accessible online is object oriented) then
you should be able to write unit tests where you create the dependencies the code you are testing
needs.</p>

<p>They can be the real thing (which I prefer) or doubles (don't be scared, you probably waste more
time on social media than it would take to keep the doubles in sync as you work on the code base)
but you MUST have the ability to modify these dependencies at run time.</p>

<p>If you also write your code in a more defensive style -- think filtering input, escaping output,
validating things, using immutability -- your tests become easier
to create and the testing scenarios you create become easier and easier to define and implement.</p>

<p>You need tests. Your code should be easy to test. I'm not mad at you if your code isn't in a place
where it easy to test. There are ways  to make them testable. No, I am
not talking about end-to-end tests with browser automation. Those are brittle and I have seen too
many of those types of test suites with weird custom helpers and step definitions that do not
reflect how the application works AT ALL. Don't do that. Browser automation is a last, desperate
test in my opinion.</p>

<p>Write assertion-based tests using real dependencies as much as possible. I'm happy to help you
get there. It will cost some time and some money but it will make the cost of the NEXT change so
much easier.</p>

<p>Hope you enjoyed the results of thinking too much about this stuff. There is SO much more I want
to learn in order to make your testing tasks easier.</p>

        </div>
                    <p class="categories">
            Categories:
                        <a class="p-category" href="https://grumpy-learning.com/blog/categories/testing">testing</a>,                         <a class="p-category" href="https://grumpy-learning.com/blog/categories/tools">tools</a>                        </p>
                        <a href="https://brid.gy/publish/mastodon"</a>
        <a href="https://brid.gy/publish/twitter"</a>
                    <nav class="article">
                <ul>
                                            <li>Next: <a class="next" href="https://grumpy-learning.com/blog/2023/04/03/neovim-and-xdebug/" title="NeoVim and Xdebug"><span class="title">NeoVim and Xdebug</span></a></li>
                                                                <li>Previous: <a class="previous" href="https://grumpy-learning.com/blog/2023/02/10/adding-search-to-a-static-blog/" title="Adding search to a static blog"><span class="title">Adding search to a static blog</span></a></li>
                                    </ul>
            </nav>
            </article>
                    <link href="/sitesearch/pagefind-ui.css" rel="stylesheet">
                    <script src="/sitesearch/pagefind-ui.js" type="text/javascript"></script>
                    <div id="search"></div>
                    <script>
                        window.addEventListener('DOMContentLoaded', (event) => {
                            new PagefindUI({ element: "#search" });
                        });
                    </script>
                </div>
                <div class="col-sm-5 sidebar">
                    <div class="card bg-light">
                        <div class="card-header">Grumpy Learning</div>
                        <div class="card-body">
                            <small>Where even the CSS is grumpy</small>                        </div>
                    </div>
                    <div class="card bg-light sidebar-nav">
                        <div class="card-header">How to get in touch</div>
                        <div class="card-body">
                            <ul class="nav flex-column">
                                <li class="nav-item">I'm <a rel="author" class="p-author h-card">Chris Hartjes</a>. I'm the guy who used to go to PHP conferences and shout at you to test your PHP code. I've calmed down a lot since then but still want to help you get better at testing.</li>
                                <li class="nav-item">I'm on Mastodon as <a rel="me" class="nav-link" href="https://phpc.social/@grmpyprogrammer">@grmpyprogrammer@phpc.social</a></li>
                                <li class="nav-item">I don't do much OSS any more but you can find my stuff on <a rel="me" class="nav-link" href="https://github.com/chartjes">GitHub</a></li>
                                <li class="nav-item">Want to ask a question? Want to hire me to do some consulting work? Interested in having me speak at your event or on your podcast? Email me at <a class="nav-link" href="mailto:chartjes@grumpy-learning.com">chartjes@grumpy-learning.com</a>
                            </ul>
                        </div>
                    </div>
                    <div class="card bg-light sidebar-nav">
                        <div class="card-header">Videos to make you less grumpy</div>
                        <div class="card-body">
                            <ul class="nav flex-column">
                                <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/testing-things-wrong">You're (Probably) Testing Things Wrong</a> is a 2 hour video looking at how to test your PHP code and ways that you might be doing it wrong.</li>
                            </ul>
                        </div>
                        <div class="card-header">Books to make you less grumpy</div>
                        <div class="card-body">
                            <ul class="nav flex-column">
                                <li class="nav-item"><a class="nav-link" href="https://leanpub.com/grumpy-guide">The Grumpy Programmer's Guide To Testing PHP Applications</a></li>
                                <li class="nav-item"><a class="nav-link" href="https://leanpub.com/grumpy-complements">The Complementary PHP Testing Tools Cookbook</a></li>
                            </ul>
                        </div>
                </div>
                    <div class="card bg-light sidebar-nav">
                        <div class="card-body">
                            <div class="tootThread" id="displayTootThread">
                                <div class="toot" id="displayToot">
                                    <div class="author">
                                        <div class="avatar">
                                            <a href="" class="authorLink" target="_blank">
                                                <img src="" style="width: 50%; height: 50%" class="avatarImg" alt="" border="0" />
                                            </a>
                                        </div>
                                        <div class="displayName">
                                            <a href="" class="displayNameLink authorLink" target="_blank"><span class="displayNameSpan"></span></a>
                                        </div>
                                        <div class="userName">
                                            <a href="" class="authorLink" target="_blank">
                                                <span class="userNameSpan"></span><span class="instanceNameSpan"></span>
                                            </a>
                                        </div>
                                    </div>
                                    <div class="content"></div>
                                <div class="createdAt">
                                    <a href="" target="_blank" class="createdAtLink"></a>
                                    <hr>
                                </div>
                            </div>
                        <div class="tootReplies">
                        </div>
                            </div>
                        </div>
                    </div>
            </div>
        </main>
        <footer class="container">
            <span class="text-muted">&copy; 2021 - 2023 Grumpy Learning</span>
        </footer>

        <script src="https://grumpy-learning.com/build/app.js"></script>
                
        
                    </body>
</html>
