<!DOCTYPE html>
<html>
    <head lang="en">
        <title>Yes, I Do Some Javascript Programming As Well &mdash; Grumpy Learning &mdash; Where even the CSS is grumpy</title>
        <meta charset="utf-8">
        <meta name="theme-color" content="#ffffff">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="https://grumpy-learning.com/build/app.css">

        <link rel="apple-touch-startup-image" href="https://grumpy-learning.com/build/2048x2048.png">
        <meta name="mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <link rel="shortcut icon" sizes="76x76" href="https://grumpy-learning.com/build/jackson/76x76.png">
        <link rel="shortcut icon" sizes="120x120" href="https://grumpy-learning.com/build/jackson/120x120.png">
        <link rel="shortcut icon" sizes="128x128" href="https://grumpy-learning.com/build/jackson/128x128.png">
        <link rel="shortcut icon" sizes="152x152" href="https://grumpy-learning.com/build/jackson/152x152.png">
        <link rel="shortcut icon" sizes="196x196" href="https://grumpy-learning.com/build/jackson/196x196.png">
        <link rel="shortcut icon" sizes="512x512" href="https://grumpy-learning.com/build/jackson/512x512.png">
        <link rel="shortcut icon" sizes="1024x1024" href="https://grumpy-learning.com/build/jackson/1024x1024.png">
        <link rel="shortcut icon" sizes="2048x2048" href="https://grumpy-learning.com/build/jackson/2048x2048.png">
        <link rel="apple-touch-icon" sizes="76x76" href="https://grumpy-learning.com/build/jackson/76x76.png">
        <link rel="apple-touch-icon" sizes="120x120" href="https://grumpy-learning.com/build/jackson/120x120.png">
        <link rel="apple-touch-icon" sizes="128x128" href="https://grumpy-learning.com/build/jackson/128x128.png">
        <link rel="apple-touch-icon" sizes="152x152" href="https://grumpy-learning.com/build/jackson/152x152.png">
        <link rel="apple-touch-icon" sizes="196x196" href="https://grumpy-learning.com/build/jackson/196x196.png">
        <link rel="apple-touch-icon" sizes="512x512" href="https://grumpy-learning.com/build/jackson/512x512.png">
        <link rel="apple-touch-icon" sizes="1024x1024" href="https://grumpy-learning.com/build/jackson/1024x1024.png">
        <link rel="apple-touch-icon" sizes="2048x2048" href="https://grumpy-learning.com/build/jackson/2048x2048.png">

        <link rel="alternate" type="application/atom+xml" href="https://grumpy-learning.com/atom.xml" title="Grumpy Learning activity feed" />
                                    </head>
    <body>
        <header>
            <nav class="navbar navbar-expand-md navbar-dark fixed-top bg-dark">
                <div class="container">
                    <a class="navbar-brand" href="https://grumpy-learning.com/">Grumpy Learning</a>
                    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation">
                        <span class="navbar-toggler-icon"></span>
                    </button>
                    <div class="collapse navbar-collapse" id="navbarCollapse">
                        <ul class="navbar-nav mr-auto">
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/blog">Posts Archive</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/blog/categories">Categories</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/blog/tags">Tags</a></li>
                            <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/about">About</a></li>
                        </ul>
                    </div>
                </div>
            </nav>
        </header>
        <main role="main" class="container">
            <div class="row">
                <div class="col-sm-7">
                        <article class="h-entry">
        <header>
            <h2><div class="p-name">Yes, I Do Some Javascript Programming As Well</div> <small>post</small></h2>
        </header>
        <div class="e-content">
            <p>(before I get into this I wanted to let people know that I will be going to <a href="http://www.zendcon.com/ZendCon08/public/content/home">ZendCon</a> to give my deployment talk.  I might be looking for a place to crash for a second night, so let me know if you're going and can hook me up)</p>

<p>
For a <a href="http://sportso.com">work project</a> I had to add in some Ajax functionality for a scoreboard feature, where users will enter scores for periods / quarters / innings and then the total score has to update automatically on the screen before the user wishes to save that scoring document.  So with some help from one of my online <a href="http://marcgrabanski.com/">javascript ninja associates</a> and Google searches, I got it all figured out, and thought I would share.
</p>

<p>
Here's a snapshot of the interface in question:
<img src="http://chrishartjes.com/sportso-scoreboard.png" alt="Sportso scoreboard interface" / width=532 height=183  />
</p>

<p>
The first thing I did was apply the same class name to the away "innings" and home "innings" form fields, so that $().serialize would be able to pull up all those fields.  That way, it wouldn't matter how many "inning" fields there might be.  The tricky thing I found out was that I need to wrap my $('.homePeriods').change() call in it's own function() call so that it would actually be loaded when the page was loaded as well.  I had no idea I needed to do that, and thanks to Marc for pointing it out.  If there is a better method, let me know.
<br />
~~~
// Method used to automatically update total fields
// when editing individual periods
$(function(){ 
    $('.homePeriods').change(function(){
        var params = $('.homePeriods').serialize();
        var pArray = params.split('&');
        var homeTotal = 0;

        for (var i=0; i < pArray.length; i++) {
            var temp = pArray[i].split('=');
            var homePeriod = temp[1];
            // Cast value to an integer with this little hack
            homePeriod = homePeriod - 0;
            homeTotal += homePeriod;
        }

        $('#homeScoreTotal').replaceWith('<td class="period" id="homeScoreTotal"><input type="text" name="homeScoreTotal" value="' + homeTotal + '" maxlength="2" size="2" id="htotal" />');
    });

    $('.awayPeriods').change(function(){
        var params = $('.awayPeriods').serialize();
        var pArray = params.split('&');
        var awayTotal = 0;

        for (var i=0; i < pArray.length; i++) {
            var temp = pArray[i].split('=');
            var awayPeriod = temp[1];
            awayPeriod = awayPeriod - 0;
            awayTotal += awayPeriod;
        }

        $('#awayScoreTotal').replaceWith('<td class="period" id="awayScoreTotal"><input type="text" name="awayScoreTotal" value="' + awayTotal + '" maxlength="2" size="2" id="vtotal" />');
    });
});
~~~
</p>

<p>
So, here's a small movie showing that in action.
<br />
<br />
[flv:http://www.archive.org/download/SportsoDynamicScoreboard/sportso-scoreboard.flv 533 400]
</p>

<p>I hope this helps out other people looking to add similar functionality to their site.</p>

        </div>
                        <a href="https://brid.gy/publish/mastodon"</a>
        <a href="https://brid.gy/publish/twitter"</a>
                    <nav class="article">
                <ul>
                                            <li>Next: <a class="next" href="https://grumpy-learning.com/blog/2008/06/13/accuracy-in-baseball-simulations/" title="Accuracy In Baseball Simulations"><span class="title">Accuracy In Baseball Simulations</span></a></li>
                                                                <li>Previous: <a class="previous" href="https://grumpy-learning.com/blog/2008/05/30/never-stop-learning-2/" title="Never Stop Learning"><span class="title">Never Stop Learning</span></a></li>
                                    </ul>
            </nav>
            </article>
                </div>
                <div class="col-sm-5 sidebar">
                    <div class="card bg-light">
                        <div class="card-header">Grumpy Learning</div>
                        <div class="card-body">
                            <small>Where even the CSS is grumpy</small>                        </div>
                    </div>
                    <div class="card bg-light sidebar-nav">
                        <div class="card-body">
						<form class="search" action="http://www.google.com/search" method="get">
						<input type="hidden" name="as_sitesearch" value="grumpy-learning.com"/>
						<input type="hidden" name="tbs" value="sbd:1,cdr:1,cd_min:1/1/1970"/>
						<input type="search" name="q"/>
						<button type="submit">Search</button>
						</form>
                        (Search results will be wonky until all the added content gets indexed)
                        </div>
                        <div class="card-header">Videos to make you less grumpy</div>
                        <div class="card-body">
                            <ul class="nav flex-column">
                                <li class="nav-item"><a class="nav-link" href="https://grumpy-learning.com/testing-things-wrong">You're (Probably) Testing Things Wrong</a> is a 2 hour video looking at how to test your PHP code and ways that you might be doing it wrong.</li>
                            </ul>
                        </div>
                        <div class="card-header">Books to make you less grumpy</div>
                        <div class="card-body">
                            <ul class="nav flex-column">
                                <li class="nav-item"><a class="nav-link" href="https://leanpub.com/grumpy-guide">The Grumpy Programmer's Guide To Testing PHP Applications</a></li>
                                <li class="nav-item"><a class="nav-link" href="https://leanpub.com/grumpy-complements">The Complementary PHP Testing Tools Cookbook</a></li>
                            </ul>
                        </div>
                    <div class="card bg-light sidebar-nav">
                        <div class="card-header">How to get in touch</div>
                        <div class="card-body">
                            <ul class="nav flex-column">
                                <li class="nav-item">I'm <a rel="author" class="p-author h-card">Chris Hartjes</a></li>
                                <li class="nav-item">I'm on Mastodon as <a rel="me" class="nav-link" href="https://phpc.social/@grmpyprogrammer">@grmpyprogrammer@phpc.social</a></li>
                                <li class="nav-item">I don't do much OSS any more but you can find my stuff on <a rel="me" class="nav-link" href="https://github.com/chartjes">GitHub</a></li>
                                <li class="nav-item">Want to ask a question? Want to hire me to do some consulting work? Interested in having me speak at your event or on your podcast? Email me at <a class="nav-link" href="mailto:chartjes@grumpy-learning.com">chartjes@grumpy-learning.com</a>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </main>
        <footer class="container">
            <span class="text-muted">&copy; 2021 - 2023 Grumpy Learning</span>
        </footer>

        <script src="https://grumpy-learning.com/build/app.js"></script>
                
        
                    </body>
</html>
